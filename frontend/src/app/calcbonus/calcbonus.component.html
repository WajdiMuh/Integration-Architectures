<div id="BonusCalculationView">
    <h1>Calculating Bonus for {{selectedemp.name}} </h1>
    <p>Employee ID : {{selectedemp.employeeid}}</p>
    <mat-spinner style="margin: auto;" *ngIf="finishedloading == false"></mat-spinner>
    <mat-form-field appearance="fill" *ngIf="finishedloading == true">
      <mat-label>Choose Year</mat-label>
      <input matInput [matDatepicker]="dp" [formControl]="date">
      <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
      <mat-datepicker #dp
                      startView="multi-year"
                      (yearSelected)="chosenYearHandler($event, dp)"
                      panelClass="example-month-picker">
      </mat-datepicker>
    </mat-form-field>
    <div id="salesorder" *ngIf="finishedloading == true">
      <p-carousel [value]="salesorders" [numVisible]="3" [numScroll]="3" *ngIf="salesorders.length != 0">
        <ng-template pTemplate="header">
          <h2>Sales Orders :</h2>
        </ng-template>
        <ng-template let-salesorder pTemplate="item">
          <mat-card class="example-card mat-elevation-z4">
            <mat-card-title-group>
              <mat-card-title>{{salesorder.name}}</mat-card-title>
              <mat-card-subtitle>Created at {{salesorder.date}}</mat-card-subtitle>
            </mat-card-title-group>
            <mat-card-content>
              <div>
                <h3>Financial Info</h3>
                <p>
                  Total Amount (excl. tax): {{salesorder.totalamount}}
                </p>
                <p>
                  Tax: {{salesorder.tax}}
                </p>
                <p>
                  Total Amount (incl. tax): {{salesorder.totalamountwithtax}}
                </p>
              </div>
              <div *ngIf="salesorder.products.length != 0">
                <h3>Products</h3>
                <p *ngFor="let product of salesorder.products">
                  Product Name: {{product.name}} Quantity: {{product.quantity}}
                </p>
              </div>
              <div>
                <h3>Customer</h3>
                <p>
                  Customer Name: {{salesorder.customer.name}} Rating: {{customerratings[salesorder.customer.rating - 1]}}
                </p>
              </div>
            </mat-card-content>
          </mat-card>
        </ng-template>
      </p-carousel>
    </div>
    <div id="performancevaluation" *ngIf="finishedloading == true && performancerecord != undefined">
        <h2>Performance Evaluation :</h2>
          <mat-card class="example-card mat-elevation-z4">
            <mat-card-content>
              <h3>Leadership Competence</h3>
              <p>
                Target Value: {{performancerecord.competence.targetval}} Actual Value: {{performancerecord.competence.actualval}}
              </p>
              <h3>Openness to Employee</h3>
              <p>
                Target Value: {{performancerecord.openness.targetval}} Actual Value: {{performancerecord.openness.actualval}}
              </p>
              <h3>Social Behavior to Employee</h3>
              <p>
                Target Value: {{performancerecord.socialbehaviour.targetval}} Actual Value: {{performancerecord.socialbehaviour.actualval}}
              </p>
              <h3>Attitude towards Client</h3>
              <p>
                Target Value: {{performancerecord.attitude.targetval}} Actual Value: {{performancerecord.attitude.actualval}}
              </p>
              <h3>Communication Skills</h3>
              <p>
                Target Value: {{performancerecord.communication.targetval}} Actual Value: {{performancerecord.communication.actualval}}
              </p>
              <h3>Integrity to Company</h3>
              <p>
                Target Value: {{performancerecord.integrity.targetval}} Actual Value: {{performancerecord.integrity.actualval}}
              </p>
            </mat-card-content>
          </mat-card>
    </div>
    <div *ngIf="finishedloading == true && salesorders.length != 0 && performancerecord != undefined">
      <h2>Remark :</h2>
      <mat-form-field class="bonusremark" appearance="fill">
        <mat-label>Remark for Bonus Calculation</mat-label>
        <textarea matInput placeholder="Leave a remark to add to the bonus calculation" [(ngModel)]="remark"></textarea>
      </mat-form-field>
    </div>
</div>
<button mat-raised-button color="primary" id="confirmbonus" *ngIf="finishedloading == true && salesorders.length != 0 && performancerecord != undefined" (click)="confirmbonus()">Confirm Bonus</button>